(this.webpackJsonpweather2=this.webpackJsonpweather2||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),o=a(26),l=a(22),u=a(64),s=a(65),d=a(18),p=a(38),m={cities:[],weather:[]},E={loading:!1,alert:{visible:!1,text:null,severity:"error"}},f=Object(l.combineReducers)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEATHER/ADDED_CITY":return{cities:[].concat(Object(p.a)(e.cities),[t.payload.id]),weather:[].concat(Object(p.a)(e.weather),[t.payload])};case"WEATHER/DELETED_CITY":return{cities:Object(p.a)(e.cities.filter((function(e){return e!==t.payload}))),weather:Object(p.a)(e.weather.filter((function(e){return e.id!==t.payload})))};case"WEATHER/UPDATED_CITY":return Object(d.a)({},e,{weather:e.weather.map((function(e){return e.id!==t.payload.id?e:t.payload}))});case"WEATHER/CITIES_LOADED":return Object(d.a)({},e,{cities:t.payload});case"WEATHER/WEATHER_LOADED":return Object(d.a)({},e,{weather:t.payload});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/START_LOADING":return Object(d.a)({},e,{loading:!0});case"APP/FINISH_LOADING":return Object(d.a)({},e,{loading:!1});case"APP/SHOW_ALERT":return Object(d.a)({},e,{alert:Object(d.a)({},e.alert,{visible:!0},t.payload)});case"APP/HIDE_ALERT":return Object(d.a)({},e,{alert:Object(d.a)({},e.alert,{visible:!1})});default:return e}}}),y=a(11),h=Object(l.createStore)(f,Object(s.composeWithDevTools)(Object(l.applyMiddleware)(u.a)));function g(e){var t=e.children;return r.a.createElement(y.a,{store:h},t)}var b=a(7),v=a(128),w=a(130),O=a(131),x=a(30),T=a(146),A=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null),r.a.createElement(w.a,{position:"relative",style:{backgroundColor:"#222"}},r.a.createElement(O.a,null,r.a.createElement(T.a,{style:{marginRight:20}}),r.a.createElement(x.a,{variant:"h6",color:"inherit",noWrap:!0},"Weather"))))},j=a(132),D=function(){return r.a.createElement("footer",{style:{marginBottom:60}},r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"\xa9 ",r.a.createElement(j.a,{color:"inherit",href:"https://github.com/mbaboshko"},"Maksym Baboshko")," ",(new Date).getFullYear(),"."))},k=a(40),S=a(133),I=a(134),P=a(135),_=a(136),W=a(137),L=a(138),H=a(139);function R(e){var t=function(e){return e<10?"0".concat(e):e},a=t(e.getHours()),n=t(e.getMinutes()),r=t(e.getSeconds());return"".concat(a,":").concat(n,":").concat(r)}var C=a(23),N=a.n(C),F=a(36),B=a(70),M="01d396de8bfe9be8523e53002de83b77",Y=a.n(B).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),G=function(e){return function(t){t(function(e){return{type:"APP/SHOW_ALERT",payload:e}}(e)),setTimeout((function(){return t({type:"APP/HIDE_ALERT"})}),2e3)}},J=function(e){return function(t,a){0===a().weather.cities.length&&t({type:"WEATHER/CITIES_LOADED",payload:e})}},z=function(){return function(){var e=Object(F.a)(N.a.mark((function e(t,a){var n,r,c,i,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=a(),!((r=n.weather).cities.length>0&&0===r.weather.length)){e.next=11;break}return t({type:"APP/START_LOADING"}),c={id:r.cities.toString(),units:"metric",appid:M},e.next=7,Y.get("/group?",{params:c});case 7:i=e.sent,o=i.data,t({type:"WEATHER/WEATHER_LOADED",payload:o.list}),t({type:"APP/FINISH_LOADING"});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:"APP/FINISH_LOADING"}),t(G({text:"Failed to load weather data. Please try again later!",severity:"error"}));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()},U=Object(S.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},heroContent:{padding:e.spacing(8,0,6)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:e.spacing(2)},footer:Object(k.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));function Q(e){var t=e.match,a=U(),c=Object(b.e)(),i=Object(y.c)((function(e){return e.weather})).weather.find((function(e){return e.id===+t.params.id})),o=Object(y.b)(),l=["Feels like ".concat(Math.round(i.main.feels_like),"\xb0C"),"Today ".concat(i.weather[0].description),"Sunrise: ".concat(R(new Date(1e3*i.sys.sunrise))),"Sunset: ".concat(R(new Date(1e3*i.sys.sunset))),"Speed of wind: ".concat(i.wind.speed," m/s")];return Object(n.useEffect)((function(){o(J(JSON.parse(localStorage.getItem("cities"))||[])),o(z())}),[]),r.a.createElement("main",null,r.a.createElement(I.a,{maxWidth:"md",component:"main"},r.a.createElement(P.a,{style:{margin:"40px 0"}},r.a.createElement(_.a,{title:i.name,subheader:i.sys.country,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},className:a.cardHeader}),r.a.createElement(W.a,null,r.a.createElement("div",{className:a.cardPricing},r.a.createElement(x.a,{component:"h2",variant:"h3",color:"textPrimary"},Math.round(i.main.temp),"\xb0C"),r.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(i.weather[0].icon,"@2x.png"),alt:i.weather[0].description})),r.a.createElement("ul",null,l.map((function(e){return r.a.createElement(x.a,{component:"li",variant:"subtitle1",align:"center",key:e},e)})))),r.a.createElement(L.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return c.push("/")}},"Back to home")))))}var q=a(71),K=a.n(q);function V(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Weather"),r.a.createElement(x.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"Add the city whose weather you want to track"))}var X=a(147),Z=a(145),$=a(144),ee=a(140),te=a(73);function ae(){var e=function(){var e=Object(n.useState)(""),t=Object(te.a)(e,2),a=t[0],r=t[1],c=Object(y.c)((function(e){return e.weather})).cities,i=Object(y.b)();return{value:a,onKeyUp:function(){var e=Object(F.a)(N.a.mark((function e(t){var n,o,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===t.key){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={q:a,units:"metric",appid:M},e.next=6,Y.get("/weather",{params:n});case 6:o=e.sent,l=o.data,r(""),c.includes(l.id)||(i({type:"WEATHER/ADDED_CITY",payload:l}),i(G({text:"".concat(l.name," city added to your list!"),severity:"success"}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),r(""),i(G({text:"City not found",severity:"error"}));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return r(e.target.value)}}}();return r.a.createElement("div",{style:{backgroundColor:"#fff",padding:50}},r.a.createElement(I.a,{maxWidth:"sm"},r.a.createElement("div",{style:{marginTop:20,position:"relative"}},r.a.createElement(V,null),r.a.createElement(X.a,{fullWidth:!0,variant:"outlined"},r.a.createElement(Z.a,{htmlFor:"outlined-adornment-amount"},"Search"),r.a.createElement($.a,Object.assign({id:"outlined-adornment-amount",startAdornment:r.a.createElement(ee.a,{position:"start"},r.a.createElement(K.a,null)),labelWidth:52},e))))))}var ne=a(142),re=a(72),ce=a.n(re),ie=function(){return r.a.createElement("div",{className:ce.a.Loader},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},oe=a(141);function le(e){var t=e.id,a=e.city,n=e.temp,c=e.feelsLike,i=e.description,l=e.date,u=Object(y.b)();return r.a.createElement(P.a,null,r.a.createElement(oe.a,null,r.a.createElement(o.b,{style:{textDecoration:"none",color:"inherit"},to:"/details/".concat(t)},r.a.createElement(W.a,null,r.a.createElement(x.a,{gutterBottom:!0,variant:"h5",component:"h2"}," ".concat(a," ").concat(n),"\xb0",r.a.createElement("span",{style:{fontSize:"16px"}}," ","(Feels like ",c,"\xb0)")),r.a.createElement(x.a,{variant:"body2",color:"textSecondary",component:"p"},"Today ".concat(i,".")),r.a.createElement(x.a,{style:{marginTop:10},variant:"body2",color:"textSecondary",component:"p"},l)))),r.a.createElement(L.a,null,r.a.createElement(H.a,{size:"small",color:"primary",onClick:function(){return u(function(e){return function(){var t=Object(F.a)(N.a.mark((function t(a){var n,r,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={id:e,units:"metric",appid:M},t.next=4,Y.get("/weather?",{params:n});case 4:r=t.sent,c=r.data,a({type:"WEATHER/UPDATED_CITY",payload:c}),a(G({text:"Weather data updated successfully!",severity:"success"})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a(G({text:"Failed to update weather data. Please try again later!",severity:"error"}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),r.a.createElement(H.a,{size:"small",color:"secondary",onClick:function(){u(function(e){return{type:"WEATHER/DELETED_CITY",payload:e}}(t)),u(G({text:"".concat(a," city removed from your list"),severity:"success"}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}function ue(){var e=Object(y.c)((function(e){return e.weather})),t=e.weather,a=e.cities,c=Object(y.c)((function(e){return e.app})).loading,i=Object(y.b)();return Object(n.useEffect)((function(){i(J(JSON.parse(localStorage.getItem("cities"))||[])),i(z())}),[]),Object(n.useEffect)((function(){localStorage.setItem("cities",JSON.stringify(a))}),[a]),r.a.createElement(I.a,{style:{padding:"60px 20px"},maxWidth:"lg"},c?r.a.createElement(ie,null):t.length>0?r.a.createElement(ne.a,{container:!0,spacing:4},t.map((function(e){var t=e.id,a=e.name,n=e.dt,c=e.main,i=e.weather,o=function(e){return"".concat(e.toLocaleDateString()," [").concat(R(e),"]")}(new Date(1e3*n));return r.a.createElement(ne.a,{item:!0,key:t,xs:12,sm:6,md:4},r.a.createElement(le,{id:t,city:a,temp:Math.round(c.temp),feelsLike:Math.round(c.feels_like),description:i[0].description,date:o}))}))):r.a.createElement("p",{style:{fontSize:"24px",textAlign:"center"}},"You have not added any cities to your list yet :("))}function se(){return r.a.createElement("main",null,r.a.createElement(ae,null),r.a.createElement(ue,null))}var de=a(143),pe=function(){var e=Object(y.c)((function(e){return e.app.alert})),t=e.visible,a=e.text,n=e.severity;return t?r.a.createElement("div",{style:{position:"fixed",bottom:30,left:40}},r.a.createElement(de.a,{variant:"filled",severity:n},a)):null};function me(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(pe,null)),r.a.createElement(b.a,{path:"/",exact:!0,component:se}),r.a.createElement(b.a,{path:"/details/:id",component:Q}),r.a.createElement(D,null))}var Ee=r.a.createElement(o.a,null,r.a.createElement(g,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null))));i.a.render(Ee,document.getElementById("root"))},72:function(e,t,a){e.exports={Loader:"Loader_Loader__EyQpd","sk-bouncedelay":"Loader_sk-bouncedelay__2DfgQ"}},78:function(e,t,a){e.exports=a(108)}},[[78,1,2]]]);
//# sourceMappingURL=main.131ec0a6.chunk.js.map